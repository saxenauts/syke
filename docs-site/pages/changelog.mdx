import { Callout } from 'nextra/components'

# Changelog

See the full [CHANGELOG.md](https://github.com/saxenauts/syke/blob/main/CHANGELOG.md) on GitHub.

## [0.4.2] — 2026-02-25 — "The Harness"

Cross-agent memory distribution. Syke now installs itself into other AI agents on your system.

### Added
- **Harness adapter system** (`syke/distribution/harness/`) — framework for installing Syke context into other AI agents. HarnessAdapter ABC with detect/install/status/uninstall interface, protocol-resilient design (adapters declare protocol + version).
- **Hermes adapter** — full A/B test mode: installs SKILL.md at `~/.hermes/skills/memory/syke/`, coexists with native MEMORY.md + USER.md without touching them.
- **Claude Desktop adapter** — adds Syke data dir to `localAgentModeTrustedFolders` in config JSON.
- **Pi adapter** — detection stub (checks `~/.pi`, `~/.config/pi`, `~/.config/piebald`).
- **`syke record`** CLI command — push observations into memory: plain text, piped stdin, `--json`, `--jsonl` batch, `--tag`, `--source`. Thin wrapper around IngestGateway.push(), no post-record synthesis.
- **`syke ask` local fallback** — queries memex + keyword-matched memories from SQLite when Agent SDK is unavailable. All error paths route to fallback.
- **Dashboard shows connected agents** — bare `syke` now displays `Agents: hermes, claude-desktop` line for detected platforms.
- **Doctor shows harness status** — `syke doctor` reports detected/connected/not-found for each adapter with notes.
- **GitHub issue #8** for community adapter requests — replaces inline TODOs.
- SKILL.md updated with `record` command docs and `license: MIT` per agentskills.io spec.

### Fixed
- Dashboard reads memex from DB and daemon from launchd (was checking stale file paths).
- Removed 4 dead imports: `user_data_dir` (cli.py), `Path` (synthesis.py), `bootstrap_memex_from_profile` (synthesis.py), `SykeDB` (gmail.py).
- Cleaned stale pycache files from removed modules.

### Changed
- Harness `install_all()` runs during `syke setup` Step 4 (auto-connects detected agents).
- Daemon synthesis refresh triggers harness re-install (keeps agent context fresh).
- 389 tests passing (was 346).


## [0.4.1] — 2026-02-24

### Breaking
- Removed ANTHROPIC_API_KEY support entirely. Auth is now Agent SDK auth-only — Syke never manages API keys or tokens. Users must run `claude login` to authenticate.
- `syke setup` now requires auth (hard fail without it). No "data-only" mode.

### Added
- `syke ask "question"` promoted from hidden to primary CLI command
- `syke context` — dump current memex to stdout
- `syke doctor` — verify auth, daemon, DB health
- `syke mcp serve` — stdio MCP server command (replaces hidden `syke serve`)
- Bare `syke` (no subcommand) shows status dashboard
- MCP ask() tool now has bounded ~50s timeout (resolves timeout issues with Claude Desktop)

### Fixed
- daemon/metrics.py: Fixed crash from importing nonexistent GITHUB_TOKEN from config
- Removed env_patch mechanism that cleared API keys when session auth was available
- Removed internal Agent SDK parser monkey patch; ask() now uses public SDK APIs only

## [0.4.0] — 2026-02-24 — "The Map Remembers"

Storage rewrite. Profiles are gone — replaced by a three-layer memory system where an AI agent builds and maintains a living map of who you are.

- **Breaking**: UserProfile-based perception replaced by memex architecture. `get_live_context` now returns the memex (agent-written map), not a profile. Old profiles auto-bootstrap into memex on first sync.
- **Memory system**: Three layers — evidence ledger (immutable events), memories (agent-written knowledge), memex (navigational map). 15 tools (10 read, 5 write) give the synthesis agent full CRUD over the memory layer.
- **Synthesis rewrite**: Agent SDK loop replaces single-shot perception. Orient → Extract & Evolve → Update the Map. ~$0.25/cycle (Sonnet, 10 turns max).
- **Storage**: SQLite + FTS5 + WAL. BM25 full-text search over memories and events. Single file per user at `~/.syke/data/{user}/syke.db`.
- **MCP**: Public API unchanged (3 tools: `get_live_context`, `ask`, `record`). Internal tools expanded from 6 to 15.
- **Auth fix**: `env_patch` no longer force-clears `ANTHROPIC_API_KEY` when `~/.claude` exists — API-key-only setups work again.
- **Removed**: `syke perceive` command, `perception/` module, beautifulsoup4/lxml/browser-use/playwright dependencies.
- **Docs**: README overhauled (330→166 lines). Architecture detail moved to `docs/ARCHITECTURE.md`. Research references corrected with proper citations (RLM, ALMA, LCM). Memex evolution doc added (`docs/MEMEX_EVOLUTION.md`). Docs-site MCP tools page rewritten for 3-tool surface.
- **Experiments**: Synthesis replay format + generator script for day-by-day memory evolution traces.
- 346 tests passing (was 297).

## [0.3.5] — 2026-02-21 — "Three Verbs"

MCP surface reduced from 10 tools to 3 — Syke is a memory agent, not a database API.

 **Breaking**: MCP tool surface reduced to 3 verbs: `get_live_context` (read profile), `ask` (reason over timeline), `record` (push observations). Removed: `push_event`, `push_events`, `get_profile`, `query_timeline`, `get_manifest`, `search_events`, `get_event`.
 Refactor: `ask_agent.py` restored to single-function architecture (`_run_ask`), removed timeout wrapper and `_run_agent` split
 Removed: `ASK_TIMEOUT_S` config and all `asyncio.wait_for` timeout machinery — no silent truncation
 Config: `ASK_MAX_TURNS` raised to 8 (was 5)
 Docs: README, SKILL.md, and strategy files updated to reflect 3-tool surface
 Housekeeping: ROADMAP.md untracked from repo, .gitignore consolidated

## [0.3.4] — 2026-02-19 — "Rate Limit Resilience"

Patch ask() to survive two CLI 2.1.45 breaking changes: nested session protection and rate_limit_event advisory messages.

- Fix: clear `CLAUDECODE` env var before Agent SDK subprocess spawn — CLI 2.1.45 refuses nested sessions, making every MCP ask() silently return empty
- Fix: patch `parse_message` at module load to return `SystemMessage` for `rate_limit_event` instead of raising — stream continues to actual answer
- Fix: fallback message updated to "Try `syke sync`" instead of "Try rephrasing"
- Tests: add coverage for rate_limit_event before real response and CLAUDECODE env clearing

## [0.3.3] — 2026-02-18 — "Steady State"

ask() is now resilient to API throttling; agent config is env-overridable.

### Fixed
- ask() no longer crashes on unknown stream events (e.g. `rate_limit_event`) — catches `ClaudeSDKError`, logs a warning, and returns a partial answer instead of erroring out
- Upgrade `claude-agent-sdk` floor to 0.1.38
- Timeline display: readable timestamps, colors, no line-wrapping, clean titles

### Changed
- Agent config centralized in `syke/config.py` — model, budget, and turn settings are all env-overridable (`SYKE_ASK_MODEL`, `SYKE_ASK_BUDGET`, `SYKE_SYNC_MODEL`, `SYKE_REBUILD_MODEL`, etc.)
- ask() budget raised from $0.15 to $1.00 default (analysis of 313 sessions showed $0.15 was insufficient for Opus-tier accounts; override with `SYKE_ASK_BUDGET`)
- Removed scattered model constants (`DEFAULT_MODEL`, `FULL_MODEL`, `INCREMENTAL_MODEL`); replaced with `ASK_*`, `SYNC_*`, `REBUILD_*` groups

### Added
- ask() now tracks cost/usage metrics to `metrics.jsonl` via `_log_ask_metrics`

<Callout type="info">
**Current release: v0.3.2 — "Claude Code Auth: Clean Slate"** (Feb 18, 2026). Session auth is now the primary path for all Claude Code users. MCP config and daemon no longer bake in API keys. 378 tests passing.
</Callout>

## [0.3.2] — Feb 18 — "No Key Required"

Session auth is now the primary path for all Claude Code users.

- **fix:** MCP config no longer bakes in `ANTHROPIC_API_KEY` — handled at startup via `config.py`
- **fix:** Cron/daemon entry no longer embeds `ANTHROPIC_API_KEY` in the crontab line
- **fix:** `ask()` uses Claude Code session auth by default
- **fix:** Daemon LaunchAgent plist no longer bakes in `ANTHROPIC_API_KEY`
- **fix:** `setup` no longer persists `ANTHROPIC_API_KEY` when `claude login` auth is present
- **feat:** Setup shows cost notice when API-key-only path is used (~$0.78/build, ~$0.02/ask)
- 67 new tests for `claude_code` and `github_` ingestion adapters (378 total)

## [0.3.0] — Feb 18 — "The Agent Knows Itself"

Self-update and version drift detection.

- **feat:** `syke self-update` — upgrades syke to the latest PyPI release, handles pipx/pip/uvx/source install methods, stops/restarts daemon around the upgrade
- **feat:** `syke/version_check.py` — stdlib-only PyPI checker with 24h disk cache, zero new dependencies
- **feat:** Daemon version drift detection — `_sync_cycle` logs a WARN and inserts a deduped timeline event per new version discovered
- **feat:** `daemon-status` version display — shows installed version and cached update-available notice (zero network cost)
- 16 new tests (304 total)

## [0.2.8] — Feb 16 — "Ship-Ready"

Cross-platform daemon support, API key persistence, code hardening, docs completeness.

- **feat:** Linux cron backend — `install_cron`, `uninstall_cron`, `cron_is_running` for daemon support on Linux
- **feat:** Platform dispatch — `install_and_start`, `stop_and_unload`, `get_status` auto-select launchd (macOS) or cron (Linux)
- **feat:** Claude Desktop MCP injection works on Linux (`~/.config/Claude/`)
- **feat:** Persist `ANTHROPIC_API_KEY` to `~/.syke/.env` during setup — cron, MCP subprocesses, and non-interactive shells find the key without `.zshrc`
- **fix:** `generate_plist` accepts custom `interval` parameter instead of hardcoded 900
- **fix:** `install_launchd` sets plist to chmod 600 for API key security
- **fix:** `ask()` returns clear message when API key is missing instead of cryptic SDK error
- **fix:** `query_timeline` source list corrected — removed stubs (twitter, youtube), added claude-code
- **docs:** Changelog, contributing, architecture, README synced to current state
- 297 tests passing

## [0.2.7] — Feb 16 — "Seamless Agent Install"

Fresh agent installs now work end-to-end without manual debugging.

- **fix:** Auto-unset `CLAUDECODE` env var before perception so Agent SDK works inside Claude Code sessions
- **fix:** Guard Step 4 against `None` profile crash when perception fails
- **fix:** Split setup final summary into three cases: success, API-key-but-no-profile, no-API-key
- **feat:** GitHubAdapter auto-detects token via `gh auth token` when `GITHUB_TOKEN` is unset
- **docs:** MCP server instructions include "First Session" guidance for agents encountering no profile
- 276 tests

## [0.2.6] — Feb 16 — "The Two-Step Fix"

Fixes the critical bugs that broke the two-step setup flow (setup without key → add key → rebuild).

- **fix:** `sync --rebuild` works when 0 new events — previously early-returned before reaching profile update
- **fix:** `setup` re-run with API key detects existing events in DB
- **fix:** `sync` handles nested Claude Code session errors gracefully
- 273 tests

## [0.2.5] — Feb 16 — "Smooth Onboarding"

Graceful handling when setup runs inside Claude Code.

- **fix:** `syke setup` no longer crashes when run inside a Claude Code session — perception is skipped with a clear message

## [0.2.4] — Feb 16 — "Zero Friction"

Agent-native fresh install — one command, zero prerequisites.

- **feat:** Optional API key — `syke setup --yes` works without `ANTHROPIC_API_KEY`
- **feat:** Absolute path resolution for MCP configs (3-tier: source → pip → uvx)
- **feat:** Claude Desktop support — setup injects Syke into Desktop MCP config
- **feat:** Smart daemon plist — correct binary path, API key in environment
- **feat:** Default user detection via `getpass.getuser()`
- 272 tests

## [0.2.3] — Feb 16 — "The Spider's Web"

ALMA meta-learning experiments tracked, incremental perception, comprehensive doc audit. 257 tests.

## [0.2.2] — Feb 15 — "The Right Database"

Harden MCP push pipeline: metadata parsing, type validation, format safety. Fix DATA_DIR to always resolve to `~/.syke/data` regardless of install method (PyPI or source). Added 4 new push pipeline tests. 244 tests total.

## [0.2.1] — Feb 15 — "The Agent Remembers (CI Fix)"

Fix CI test failures when `ANTHROPIC_API_KEY` is not set. The `ask()` MCP test now skips gracefully in CI. Added API key requirement documentation.

## [0.2.0] — Feb 15 — "The Daemon Awakens"

Background sync daemon ships as core feature with `daemon-start`, `daemon-stop`, `daemon-status` CLI commands. Added `ask()` MCP tool for agentic natural language queries against the timeline. Added `world_state` field to perception output. Cost optimization: daemon skips perception when no new events exist.

## [0.1.1] — Feb 14 — "The System Remembers"

Docs site on Nextra, GitHub Actions CI pipeline, issue/PR templates, tbump release infrastructure, version bump automation.

## [0.1.0] — Feb 13 — "The System Sees"

MCP server with 8 tools (pull + push), pre-ingestion content filter, 4 output formats (JSON, Markdown, CLAUDE.md, USER.md), viz site with 14 interactive sections, 244 tests across 17 test files.

## [0.0.4] — Feb 12 — "The Agent Evolves"

ALMA-inspired strategy evolution. 12 benchmark runs on real data, peak 94.3% quality at $0.60/run (67% cheaper than legacy). Strategy v1 discovered that concepts beat project names.

## [0.0.3] — Feb 11 — "Three Agents, One Identity"

Multi-agent perception: 3 Sonnet sub-agents (timeline, patterns, voice) explore in parallel, Opus synthesizes. 100% source coverage, richer cross-platform threads.

## [0.0.2] — Feb 10 — "The Agent Explores"

Agent SDK rewrite of perception. 6 custom MCP tools for interactive exploration. Coverage gating via `PermissionResultDeny` hooks. Active exploration replaces passive context dump.

## [0.0.1] — Feb 9 — "Foundation"

Core pipeline: 4 platform adapters (Claude Code dual-store, ChatGPT ZIP, GitHub REST, Gmail OAuth), SQLite timeline with WAL mode, legacy single-shot perception with Opus 4.6 extended thinking.
